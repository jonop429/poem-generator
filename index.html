<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Poem Forms</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: sans-serif;
  max-width: 800px;
  margin: 2rem auto;
  padding: 1rem;
}

.menu {
  position: fixed;
  top: 1rem;
  left: 1rem;
}

.menu button {
  background: #222;
  color: white;
  border: 0;
  padding: 0.5rem 0.75rem;
  cursor: pointer;
}

.menu-items {
  display: none;
  background: #f0f0f0;
  border: 1px solid #ccc;
  margin-top: 0.25rem;
}

.menu-items div {
  padding: 0.5rem;
  cursor: pointer;
}

.menu-items div:hover {
  background: #ddd;
}

.menu.open .menu-items {
  display: block;
}

h1 {
  margin-top: 4rem;
}

.input-row {
  display: flex;
  align-items: center;
  margin-bottom: 0.5rem;
}

.drag-handle {
  cursor: grab;
  margin-right: 0.5rem;
  user-select: none;
}

input {
  width: 100%;
  padding: 0.5rem;
}

button.action {
  margin-top: 0.5rem;
  margin-right: 0.5rem;
}
</style>
</head>

<body>

<!-- MENU -->
<div class="menu" id="menu">
  <button id="menuToggle">â˜°</button>
  <div class="menu-items">
    <div class="menu-item" data-form="paradelle">Paradelle</div>
    <div class="menu-item" data-form="obverse">Obverse</div>
  </div>
</div>

<h1 id="title"></h1>
<p id="info"></p>

<div id="input-section"></div>
<div id="output-section" style="display:none;"></div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const title = document.getElementById("title");
  const info = document.getElementById("info");
  const inputSection = document.getElementById("input-section");
  const outputSection = document.getElementById("output-section");

  const menu = document.getElementById("menu");
  document.getElementById("menuToggle").onclick = () =>
    menu.classList.toggle("open");

  let currentForm = "paradelle";
  let inputs = Array(6).fill("");
  let obverseInputs = Array(4).fill("");
  let thesis = "";

  const forms = {
    paradelle: {
      title: "Paradelle Generator",
      info: "A paradelle is a poetic form involving repetition and rearrangement. Billy Collins invented it in \"Paradelle for Susan\" for his 1998 book, \"Picnic, Lightning,\" but claimed that it was an 11th century French form. The prank successfully prompted a paradelle revival before Collins admitted in 2002 that he made it up.",
      renderInputs() {
        inputSection.innerHTML = "";
        inputs.forEach((v, i) => {
          const row = document.createElement("input");
          row.placeholder = `Line ${i+1}`;
          row.value = v;
          row.oninput = e => inputs[i] = e.target.value;
          inputSection.appendChild(row);
        });
        addButtons();
      }
    },
    obverse: {
      title: "Obverse",
      info: "The obverse was created by Nicole Sealey for her poem \"Candelabra with Heads\" in her 2017 debut, \"Ordinary Beast.\" Inputs are mirrored into two stanzas, followed by a thesis question.",
      renderInputs() {
        inputSection.innerHTML = "";
        obverseInputs.forEach((v, i) => {
          const row = document.createElement("input");
          row.placeholder = `Input ${i+1}`;
          row.value = v;
          row.oninput = e => obverseInputs[i] = e.target.value;
          inputSection.appendChild(row);
        });

        const thesisRow = document.createElement("div");
        thesisRow.className = "input-row";

        const thesisInput = document.createElement("input");
        thesisInput.placeholder = "Thesis question";
        thesisInput.value = thesis;
        thesisInput.oninput = e => thesis = e.target.value;

        const qm = document.createElement("span");
        qm.textContent = " ?";
        qm.style.marginLeft = "0.25rem";

        thesisRow.append(thesisInput, qm);
        inputSection.appendChild(thesisRow);

        const add = document.createElement("button");
        add.textContent = "Add input";
        add.className = "action";
        add.onclick = () => {
          obverseInputs.push("");
          forms.obverse.renderInputs();
        };

        inputSection.appendChild(add);
        addButtons();
      }
    }
  };

  function addButtons() {
    const gen = document.createElement("button");
    gen.textContent = "Generate";
    gen.className = "action";
    gen.onclick = () => alert("Generation placeholder");

    inputSection.appendChild(gen);
  }

  function renderForm(name) {
    currentForm = name;
    title.textContent = forms[name].title;
    info.textContent = forms[name].info;
    forms[name].renderInputs();
    outputSection.style.display = "none";
    inputSection.style.display = "block";
  }

  document.querySelectorAll(".menu-item").forEach(item => {
    item.onclick = () => {
      menu.classList.remove("open");
      renderForm(item.dataset.form);
    };
  });

  /* INITIAL RENDER */
  renderForm("paradelle");

});
</script>

</body>
</html>